
<app-sub-menu title="Přehled" showEventClip="true"></app-sub-menu>
<mat-progress-bar *ngIf="loading" mode="indeterminate" class="loading"></mat-progress-bar>
<div class="container">
  <div *ngIf="grid" fxLayout="row wrap" fxLayoutAlign="start start">
    <div class="leftpanel" fxFlex="10 1 auto">
      <div fxLayout="row">
        <div class="daypanel" fxFlex="1 0 auto" fxLayoutAlign="center center">&nbsp;</div>
        <mat-grid-list fxFlex="10 1 auto" [cols]="grid.calendars.length" rowHeight="70px">
            <mat-grid-tile *ngFor="let cal of grid.calendars">
              <div fxFlexFill fxLayout="column" fxLayoutAlign="start center"> 
                  <div class="mat-title nomargin" >{{cal.name}}</div>
                  <div class="mat-body-strong nomargin">{{(cal.location_id | location)?.name}}</div>
              </div>
            </mat-grid-tile>
        </mat-grid-list> 
      </div>
      <div fxLayout="row" *ngFor="let day of grid.days">
        <div class="daypanel" fxFlex="1 0 auto" fxLayoutAlign="center center"> <app-daycard [date]="day.day"></app-daycard></div>
        <mat-grid-list  fxFlex="10 1 auto" [cols]="grid.calendars.length" rowHeight="75px">
            <mat-grid-tile *ngFor="let status of day.statuses"> 
                <div class="calstatusbox mat-raised-button" [class.any_ohs]="status.any_ohs" [class.busy]="!status.any_free" fxLayoutAlign="center center" (click)="onSelect(status)"> 
                    <ng-container *ngIf="status.any_ohs">
                        {{!status.any_free | busyfree}} 
                    </ng-container>
                </div>
             </mat-grid-tile> 
        </mat-grid-list>  
      </div> 
    </div>
    <div class="rightpanel" fxFlex="1 0 auto">
        <app-daypicker-panel [first_day]="first_day" [selected_day]="selected_day"  (select)="onChangeDay($event)" (move)="onMoveCal($event)"></app-daypicker-panel>
        
       
        <mat-card>
            <mat-card-header><mat-card-title>Hledání</mat-card-title></mat-card-header>
            <mat-card-content>
                <app-calendar-event-search (search)="onSearch($event)" [submitted]="search_submitted"></app-calendar-event-search>
            </mat-card-content>
        </mat-card>
        
       

    </div>
  </div>
</div>

